import{r as Wt,s as me,c as ea,u as ta,g as aa,a as ra,x as sa,i as na,n as pe,o as wt,y as $t,z as Xt}from"../chunks/scheduler.m4vwWxz1.js";import{a as F,t as C,S as ve,i as ge,e as p,c as $,d as y,g as m,o as v,j as M,s as S,b as B,y as Se,h as P,f as q,k as o,l as ee,z as vt,A as Lt,B as la,u as Q,v as O,w as U,x as G,m as bt,q as Ue,n as Ge}from"../chunks/index.BxN3u_vA.js";function yt(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function ca(n,e){n.d(1),e.delete(n.key)}function oa(n,e){F(n,1,1,()=>{e.delete(n.key)})}function Yt(n,e,t,a,s,r,l,c,d,i,f,g){let u=n.length,_=r.length,b=u;const k={};for(;b--;)k[n[b].key]=b;const H=[],D=new Map,I=new Map,w=[];for(b=_;b--;){const E=g(s,r,b),h=t(E);let T=l.get(h);T?w.push(()=>T.p(E,e)):(T=i(h,E),T.c()),D.set(h,H[b]=T),h in k&&I.set(h,Math.abs(b-k[h]))}const z=new Set,j=new Set;function R(E){C(E,1),E.m(c,f),l.set(E.key,E),f=E.first,_--}for(;u&&_;){const E=H[_-1],h=n[u-1],T=E.key,X=h.key;E===h?(f=E.first,u--,_--):D.has(X)?!l.has(T)||z.has(T)?R(E):j.has(X)?u--:I.get(T)>I.get(X)?(j.add(T),R(E)):(z.add(X),u--):(d(h,l),u--)}for(;u--;){const E=n[u];D.has(E.key)||d(E,l)}for(;_;)R(H[_-1]);return Wt(w),H}const ia=!1,Dr=Object.freeze(Object.defineProperty({__proto__:null,ssr:ia},Symbol.toStringTag,{value:"Module"}));var Zt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jt(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Kt={exports:{}};(function(n,e){(function(t,a){n.exports=a()})(Zt,function(){var t=function(){function a(_){return l.appendChild(_.dom),_}function s(_){for(var b=0;b<l.children.length;b++)l.children[b].style.display=b===_?"block":"none";r=_}var r=0,l=document.createElement("div");l.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",l.addEventListener("click",function(_){_.preventDefault(),s(++r%l.children.length)},!1);var c=(performance||Date).now(),d=c,i=0,f=a(new t.Panel("FPS","#0ff","#002")),g=a(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=a(new t.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:l,addPanel:a,showPanel:s,begin:function(){c=(performance||Date).now()},end:function(){i++;var _=(performance||Date).now();if(g.update(_-c,200),_>d+1e3&&(f.update(1e3*i/(_-d),100),d=_,i=0,u)){var b=performance.memory;u.update(b.usedJSHeapSize/1048576,b.jsHeapSizeLimit/1048576)}return _},update:function(){c=this.end()},domElement:l,setMode:s}};return t.Panel=function(a,s,r){var l=1/0,c=0,d=Math.round,i=d(window.devicePixelRatio||1),f=80*i,g=48*i,u=3*i,_=2*i,b=3*i,k=15*i,H=74*i,D=30*i,I=document.createElement("canvas");I.width=f,I.height=g,I.style.cssText="width:80px;height:48px";var w=I.getContext("2d");return w.font="bold "+9*i+"px Helvetica,Arial,sans-serif",w.textBaseline="top",w.fillStyle=r,w.fillRect(0,0,f,g),w.fillStyle=s,w.fillText(a,u,_),w.fillRect(b,k,H,D),w.fillStyle=r,w.globalAlpha=.9,w.fillRect(b,k,H,D),{dom:I,update:function(z,j){l=Math.min(l,z),c=Math.max(c,z),w.fillStyle=r,w.globalAlpha=1,w.fillRect(0,0,f,k),w.fillStyle=s,w.fillText(d(z)+" "+a+" ("+d(l)+"-"+d(c)+")",u,_),w.drawImage(I,b+i,k,H-i,D,b,k,H-i,D),w.fillRect(b+H-i,k,i,D),w.fillStyle=r,w.globalAlpha=.9,w.fillRect(b+H-i,k,i,d((1-z/j)*D))}}},t})})(Kt);var fa=Kt.exports;const ua=Jt(fa);var xt={exports:{}};/**
 * @license MIT
 * topbar 3.0.0
 * http://buunguyen.github.io/topbar
 * Copyright (c) 2024 Buu Nguyen
 */(function(n){(function(e,t){function a(){s.width=e.innerWidth,s.height=5*f.barThickness;var u=s.getContext("2d");u.shadowBlur=f.shadowBlur,u.shadowColor=f.shadowColor;var _,b=u.createLinearGradient(0,0,s.width,0);for(_ in f.barColors)b.addColorStop(_,f.barColors[_]);u.lineWidth=f.barThickness,u.beginPath(),u.moveTo(0,f.barThickness/2),u.lineTo(Math.ceil(r*s.width),f.barThickness/2),u.strokeStyle=b,u.stroke()}var s,r,l,c=null,d=null,i=null,f={autoRun:!0,barThickness:3,barColors:{0:"rgba(26,  188, 156, .9)",".25":"rgba(52,  152, 219, .9)",".50":"rgba(241, 196, 15,  .9)",".75":"rgba(230, 126, 34,  .9)","1.0":"rgba(211, 84,  0,   .9)"},shadowBlur:10,shadowColor:"rgba(0,   0,   0,   .6)",className:null},g={config:function(u){for(var _ in u)f.hasOwnProperty(_)&&(f[_]=u[_])},show:function(u){var _,b;l||(u?i=i||setTimeout(()=>g.show(),u):(l=!0,d!==null&&e.cancelAnimationFrame(d),s||((b=(s=t.createElement("canvas")).style).position="fixed",b.top=b.left=b.right=b.margin=b.padding=0,b.zIndex=100001,b.display="none",f.className&&s.classList.add(f.className),_="resize",u=a,(b=e).addEventListener?b.addEventListener(_,u,!1):b.attachEvent?b.attachEvent("on"+_,u):b["on"+_]=u),s.parentElement||t.body.appendChild(s),s.style.opacity=1,s.style.display="block",g.progress(0),f.autoRun&&function k(){c=e.requestAnimationFrame(k),g.progress("+"+.05*Math.pow(1-Math.sqrt(r),2))}()))},progress:function(u){return u===void 0||(typeof u=="string"&&(u=(0<=u.indexOf("+")||0<=u.indexOf("-")?r:0)+parseFloat(u)),r=1<u?1:u,a()),r},hide:function(){clearTimeout(i),i=null,l&&(l=!1,c!=null&&(e.cancelAnimationFrame(c),c=null),function u(){return 1<=g.progress("+.1")&&(s.style.opacity-=.05,s.style.opacity<=.05)?(s.style.display="none",void(d=null)):void(d=e.requestAnimationFrame(u))}())}};n.exports=g}).call(Zt,window,document)})(xt);var da=xt.exports;const Ht=Jt(da);function ha(n){let e,t;const a=n[1].default,s=ea(a,n,n[0],null);return{c(){e=p("div"),s&&s.c(),this.h()},l(r){e=$(r,"DIV",{class:!0});var l=y(e);s&&s.l(l),l.forEach(m),this.h()},h(){v(e,"class","container main-container svelte-1afmsuo")},m(r,l){M(r,e,l),s&&s.m(e,null),t=!0},p(r,[l]){s&&s.p&&(!t||l&1)&&ta(s,a,r,r[0],t?ra(a,r[0],l,null):aa(r[0]),null)},i(r){t||(C(s,r),t=!0)},o(r){F(s,r),t=!1},d(r){r&&m(e),s&&s.d(r)}}}function ma(n,e,t){let{$$slots:a={},$$scope:s}=e;return n.$$set=r=>{"$$scope"in r&&t(0,s=r.$$scope)},[s,a]}class va extends ve{constructor(e){super(),ge(this,e,ma,ha,me,{})}}class _e{static intRandomBetween(e,t){return e>t&&([e,t]=[t,e]),Math.floor(Math.random()*(t-e+1))+e}static floatRandomBetween(e,t){return e>t&&([e,t]=[t,e]),Math.random()*(t-e)+e}static shuffle(e){const t=[...e];let a=t.length;for(;a!=0;){let s=Math.floor(Math.random()*a);a--,[t[a],t[s]]=[t[s],t[a]]}return t}static formatDateTime(e){const t=new Date(e),a=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0"),r=String(t.getSeconds()).padStart(2,"0"),l=String(t.getMilliseconds()).padStart(3,"0");return`${a}:${s}:${r}.${l}`}}const ga=(n,e)=>(n.appendChild(e.dom),{destroy(){e.dom.remove()}});function _a(n){let e,t,a="Clock",s,r,l,c,d,i=_e.formatDateTime(n[0].time.now)+"",f,g,u,_,b,k,H;return{c(){e=p("div"),t=p("div"),t.textContent=a,s=S(),r=p("div"),l=p("div"),c=p("div"),d=p("div"),f=B(i),g=S(),u=p("div"),_=p("div"),this.h()},l(D){e=$(D,"DIV",{class:!0});var I=y(e);t=$(I,"DIV",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-lcmmol"&&(t.textContent=a),s=P(I),r=$(I,"DIV",{class:!0});var w=y(r);l=$(w,"DIV",{class:!0});var z=y(l);c=$(z,"DIV",{class:!0});var j=y(c);d=$(j,"DIV",{class:!0});var R=y(d);f=q(R,i),R.forEach(m),j.forEach(m),g=P(z),u=$(z,"DIV",{class:!0});var E=y(u);_=$(E,"DIV",{class:!0}),y(_).forEach(m),E.forEach(m),z.forEach(m),w.forEach(m),I.forEach(m),this.h()},h(){v(t,"class","card-header"),v(d,"class","clock text-center svelte-gxgc4u"),v(c,"class","col"),v(_,"class","stats svelte-gxgc4u"),v(u,"class","col text-center"),v(l,"class","row"),v(r,"class","card-body text-center"),v(e,"class","card")},m(D,I){M(D,e,I),o(e,t),o(e,s),o(e,r),o(r,l),o(l,c),o(c,d),o(d,f),o(l,g),o(l,u),o(u,_),k||(H=sa(b=ga.call(null,_,n[1])),k=!0)},p(D,[I]){I&1&&i!==(i=_e.formatDateTime(D[0].time.now)+"")&&ee(f,i),b&&na(b.update)&&I&2&&b.update.call(null,D[1])},i:pe,o:pe,d(D){D&&m(e),k=!1,H()}}}function pa(n,e,t){let{clock:a}=e,{stats:s}=e;const r=c=>{c.stopImmediatePropagation()},l=c=>{c.addEventListener("click",r,!0)};return wt(()=>{s.dom.removeAttribute("style");const c=s.dom.querySelectorAll("canvas");c[0].removeAttribute("style"),c[0].classList.add("stats-fps"),c[1].removeAttribute("style"),c[1].classList.add("stats-ms"),c[2].removeAttribute("style"),c[2].classList.add("stats-mb"),l(s.dom),l(c[0]),l(c[1]),l(c[2])}),n.$$set=c=>{"clock"in c&&t(0,a=c.clock),"stats"in c&&t(1,s=c.stats)},[a,s]}class $a extends ve{constructor(e){super(),ge(this,e,pa,_a,me,{clock:0,stats:1})}}class De{static shortNumber(e,t){if(e==null)return"-";const a=t==="BRL"?"R$ ":"",s=t==="BRL"?"pt-br":"en-us",r=e;return r>5e11||r<-5e11?`${a}${(r/1e12).toLocaleString(s,{maximumFractionDigits:1})}T`:r>5e8||r<-5e8?`${a}${(r/1e9).toLocaleString(s,{maximumFractionDigits:1})}b`:r>5e5||r<-5e5?`${a}${(r/1e6).toLocaleString(s,{maximumFractionDigits:1})}MM`:r>5e4||r<-5e4?`${a}${(r/1e3).toLocaleString(s,{maximumFractionDigits:0})}k`:r>500||r<-500?`${a}${(r/1e3).toLocaleString(s,{maximumFractionDigits:1})}k`:r.toLocaleString(s,{maximumFractionDigits:2})==="-0"?`${a}0`:r.toLocaleString(s,{maximumFractionDigits:1})==="-0"?`${a}${r.toLocaleString(s,{maximumFractionDigits:2})}`:r.toLocaleString(s,{maximumFractionDigits:0})==="-0"?`${a}${r.toLocaleString(s,{maximumFractionDigits:1})}`:r<10&&r>0?`${a}${r.toLocaleString(s,{maximumFractionDigits:2})}`:`${a}${r.toLocaleString(s,{maximumFractionDigits:0})}`}static dateTime(e){if(e===void 0)return"-";const t=new Date(e),a=t.toLocaleDateString({weekday:"long",year:"numeric",month:"short",day:"numeric"}),s=t.toLocaleTimeString();return`${a} - ${s}`}static time(e){return e===void 0?"-":new Date(e).toLocaleTimeString()}static number(e,t,a){if(e===void 0)return"-";const s="en-us";return t===void 0&&(t=0),a===void 0&&(a=0),`${e.toLocaleString(s,{minimumFractionDigits:t,maximumFractionDigits:a})}`}static money(e,t){const a=t==="BRL"?"R$ ":"$",s=t==="BRL"?"pt-br":"en-us";return`${a}${e.toLocaleString(s,{minimumFractionDigits:2,maximumFractionDigits:2})}`}static percent(e,t,a){let s=2,r=2;return t!==void 0&&(s=t),a!==void 0&&(r=a),`${(e*100).toLocaleString("en-us",{minimumFractionDigits:s,maximumFractionDigits:r})}%`}static percentPrecise(e){return`${(e*100).toLocaleString("en-us",{minimumFractionDigits:0,maximumFractionDigits:5})}%`}}function ba(n){let e,t,a="Threads",s,r,l,c=De.shortNumber(n[0])+"",d;return{c(){e=p("div"),t=p("div"),t.textContent=a,s=S(),r=p("div"),l=p("span"),d=B(c),this.h()},l(i){e=$(i,"DIV",{class:!0});var f=y(e);t=$(f,"DIV",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-1gtg1ai"&&(t.textContent=a),s=P(f),r=$(f,"DIV",{class:!0});var g=y(r);l=$(g,"SPAN",{class:!0});var u=y(l);d=q(u,c),u.forEach(m),g.forEach(m),f.forEach(m),this.h()},h(){v(t,"class","card-header"),v(l,"class","fs-3 actual"),v(r,"class","card-body text-center"),v(e,"class","card")},m(i,f){M(i,e,f),o(e,t),o(e,s),o(e,r),o(r,l),o(l,d)},p(i,[f]){f&1&&c!==(c=De.shortNumber(i[0])+"")&&ee(d,c)},i:pe,o:pe,d(i){i&&m(e)}}}function ya(n,e,t){let{threads:a}=e;return n.$$set=s=>{"threads"in s&&t(0,a=s.threads)},[a]}class wa extends ve{constructor(e){super(),ge(this,e,ya,ba,me,{threads:0})}}function ka(n){let e,t,a="Controls",s,r,l,c="Restart Transactor",d,i;return{c(){e=p("div"),t=p("div"),t.textContent=a,s=S(),r=p("div"),l=p("button"),l.textContent=c,this.h()},l(f){e=$(f,"DIV",{class:!0});var g=y(e);t=$(g,"DIV",{class:!0,"data-svelte-h":!0}),Se(t)!=="svelte-14h0nsf"&&(t.textContent=a),s=P(g),r=$(g,"DIV",{class:!0});var u=y(r);l=$(u,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),Se(l)!=="svelte-1h551u2"&&(l.textContent=c),u.forEach(m),g.forEach(m),this.h()},h(){v(t,"class","card-header"),v(l,"type","button"),v(l,"class","btn btn-warning"),v(r,"class","card-body text-center"),v(e,"class","card")},m(f,g){M(f,e,g),o(e,t),o(e,s),o(e,r),o(r,l),d||(i=vt(l,"click",n[0]),d=!0)},p:pe,i:pe,o:pe,d(f){f&&m(e),d=!1,i()}}}function Ea(n,e,t){let{system:a}=e;const s=()=>{a.restart()};return n.$$set=r=>{"system"in r&&t(1,a=r.system)},[s,a]}class Da extends ve{constructor(e){super(),ge(this,e,Ea,ka,me,{system:1})}}function Ia(n){let e,t,a,s,r,l=n[1](n[2])+"",c,d,i,f,g;return{c(){e=p("div"),t=p("label"),a=B(n[0]),s=B(": "),r=p("code"),c=B(l),d=S(),i=p("input"),this.h()},l(u){e=$(u,"DIV",{});var _=y(e);t=$(_,"LABEL",{for:!0,class:!0});var b=y(t);a=q(b,n[0]),s=q(b,": "),r=$(b,"CODE",{});var k=y(r);c=q(k,l),k.forEach(m),b.forEach(m),d=P(_),i=$(_,"INPUT",{id:!0,type:!0,class:!0,min:!0,max:!0}),_.forEach(m),this.h()},h(){v(t,"for",`range-${n[5]}`),v(t,"class","form-label"),v(i,"id",`range-${n[5]}`),v(i,"type","range"),v(i,"class","form-range"),v(i,"min",n[3]),v(i,"max",n[4])},m(u,_){M(u,e,_),o(e,t),o(t,a),o(t,s),o(t,r),o(r,c),o(e,d),o(e,i),Lt(i,n[2]),f||(g=[vt(i,"change",n[8]),vt(i,"input",n[8]),vt(i,"input",n[6])],f=!0)},p(u,[_]){_&1&&ee(a,u[0]),_&6&&l!==(l=u[1](u[2])+"")&&ee(c,l),_&4&&Lt(i,u[2])},i:pe,o:pe,d(u){u&&m(e),f=!1,Wt(g)}}}function Ta(n,e,t){let{range:a}=e,{label:s}=e,{format:r=u=>u}=e,{min:l,max:c,value:d,id:i}=a;const f=u=>{t(7,a.value=u.target.value,a)};function g(){d=la(this.value),t(2,d)}return n.$$set=u=>{"range"in u&&t(7,a=u.range),"label"in u&&t(0,s=u.label),"format"in u&&t(1,r=u.format)},[s,r,d,l,c,i,f,a,g]}class We extends ve{constructor(e){super(),ge(this,e,Ta,Ia,me,{range:7,label:0,format:1})}}function Sa(n){let e,t,a=n[0].label+"",s,r,l,c=n[0].id+"",d,i,f,g,u,_,b,k,H,D;return _=new We({props:{label:"transaction requests / second",format:n[1],range:n[0].transactionsPerSecond}}),H=new We({props:{label:"segments / transaction",format:n[2],range:n[0].segmentsPerTransaction}}),{c(){e=p("div"),t=p("div"),s=B(a),r=S(),l=p("code"),d=B(c),i=S(),f=p("div"),g=p("div"),u=p("div"),Q(_.$$.fragment),b=S(),k=p("div"),Q(H.$$.fragment),this.h()},l(I){e=$(I,"DIV",{class:!0});var w=y(e);t=$(w,"DIV",{class:!0});var z=y(t);s=q(z,a),r=P(z),l=$(z,"CODE",{});var j=y(l);d=q(j,c),j.forEach(m),z.forEach(m),i=P(w),f=$(w,"DIV",{class:!0});var R=y(f);g=$(R,"DIV",{class:!0});var E=y(g);u=$(E,"DIV",{class:!0});var h=y(u);O(_.$$.fragment,h),h.forEach(m),b=P(E),k=$(E,"DIV",{class:!0});var T=y(k);O(H.$$.fragment,T),T.forEach(m),E.forEach(m),R.forEach(m),w.forEach(m),this.h()},h(){v(t,"class","card-header"),v(u,"class","col"),v(k,"class","col"),v(g,"class","row"),v(f,"class","card-body"),v(e,"class","card")},m(I,w){M(I,e,w),o(e,t),o(t,s),o(t,r),o(t,l),o(l,d),o(e,i),o(e,f),o(f,g),o(g,u),U(_,u,null),o(g,b),o(g,k),U(H,k,null),D=!0},p(I,[w]){(!D||w&1)&&a!==(a=I[0].label+"")&&ee(s,a),(!D||w&1)&&c!==(c=I[0].id+"")&&ee(d,c);const z={};w&1&&(z.range=I[0].transactionsPerSecond),_.$set(z);const j={};w&1&&(j.range=I[0].segmentsPerTransaction),H.$set(j)},i(I){D||(C(_.$$.fragment,I),C(H.$$.fragment,I),D=!0)},o(I){F(_.$$.fragment,I),F(H.$$.fragment,I),D=!1},d(I){I&&m(e),G(_),G(H)}}}function Pa(n,e,t){let{peer:a}=e;const s=l=>`~${De.number(l)}`,r=l=>`~${De.number(l)}`;return n.$$set=l=>{"peer"in l&&t(0,a=l.peer)},[a,s,r]}class La extends ve{constructor(e){super(),ge(this,e,Pa,Sa,me,{peer:0})}}function Ct(n){let e,t,a,s;return{c(){e=p("div"),t=p("div"),this.h()},l(r){e=$(r,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-valuenow":!0,"aria-valuemin":!0,"aria-valuemax":!0});var l=y(e);t=$(l,"DIV",{class:!0,style:!0}),y(t).forEach(m),l.forEach(m),this.h()},h(){v(t,"class",a=$t(`progress-bar bg-${n[1]} text-dark`)+" svelte-g4x9xm"),v(t,"style",s=`width: ${n[7]}%`),v(e,"class","progress hints svelte-g4x9xm"),v(e,"role","progressbar"),v(e,"aria-label","Info example"),v(e,"aria-valuenow",n[2]),v(e,"aria-valuemin","0"),v(e,"aria-valuemax",n[5])},m(r,l){M(r,e,l),o(e,t)},p(r,l){l&2&&a!==(a=$t(`progress-bar bg-${r[1]} text-dark`)+" svelte-g4x9xm")&&v(t,"class",a),l&128&&s!==(s=`width: ${r[7]}%`)&&v(t,"style",s),l&4&&v(e,"aria-valuenow",r[2]),l&32&&v(e,"aria-valuemax",r[5])},d(r){r&&m(e)}}}function Ha(n){let e,t,a=n[3](n[0])+"",s,r,l,c,d,i=n[2]!==null&&Ct(n);return{c(){e=p("div"),t=p("div"),s=B(a),c=S(),i&&i.c(),d=bt(),this.h()},l(f){e=$(f,"DIV",{class:!0,role:!0,"aria-label":!0,"aria-valuenow":!0,"aria-valuemin":!0,"aria-valuemax":!0});var g=y(e);t=$(g,"DIV",{class:!0,style:!0});var u=y(t);s=q(u,a),u.forEach(m),g.forEach(m),c=P(f),i&&i.l(f),d=bt(),this.h()},h(){v(t,"class",r=$t(`progress-bar bg-${n[1]} text-dark`)+" svelte-g4x9xm"),v(t,"style",l=`width: ${n[6]}%`),v(e,"class","progress"),v(e,"role","progressbar"),v(e,"aria-label","Info example"),v(e,"aria-valuenow",n[0]),v(e,"aria-valuemin","0"),v(e,"aria-valuemax",n[4])},m(f,g){M(f,e,g),o(e,t),o(t,s),M(f,c,g),i&&i.m(f,g),M(f,d,g)},p(f,[g]){g&9&&a!==(a=f[3](f[0])+"")&&ee(s,a),g&2&&r!==(r=$t(`progress-bar bg-${f[1]} text-dark`)+" svelte-g4x9xm")&&v(t,"class",r),g&64&&l!==(l=`width: ${f[6]}%`)&&v(t,"style",l),g&1&&v(e,"aria-valuenow",f[0]),g&16&&v(e,"aria-valuemax",f[4]),f[2]!==null?i?i.p(f,g):(i=Ct(f),i.c(),i.m(d.parentNode,d)):i&&(i.d(1),i=null)},i:pe,o:pe,d(f){f&&(m(e),m(c),m(d)),i&&i.d(f)}}}function Ca(n,e,t){let{value:a}=e,{color:s="info"}=e,{max:r=null}=e,{min:l=null}=e,{hits:c=null}=e,{format:d=b=>b}=e,i=r===null?0:r,f=0;const g=(b,k,H)=>k===0?0:(b!==0&&b<H?H+b:b)/k*100;let u=0,_=0;return n.$$set=b=>{"value"in b&&t(0,a=b.value),"color"in b&&t(1,s=b.color),"max"in b&&t(8,r=b.max),"min"in b&&t(9,l=b.min),"hits"in b&&t(2,c=b.hits),"format"in b&&t(3,d=b.format)},n.$$.update=()=>{n.$$.dirty&309&&(r===null&&a>i&&t(4,i=a),c!==null&&c>f&&t(5,f=c)),n.$$.dirty&565&&(t(6,u=g(a,i,l)),c!==null&&t(7,_=g(c,f,0)))},[a,s,c,d,i,f,u,_,r,l]}class qe extends ve{constructor(e){super(),ge(this,e,Ca,Ha,me,{value:0,color:1,max:8,min:9,hits:2,format:3})}}function Va(n){let e,t,a;return t=new qe({props:{color:"danger",format:n[5],value:n[2][`${n[3]}Queue`].length}}),{c(){e=B(`Queue Size:
			`),Q(t.$$.fragment)},l(s){e=q(s,`Queue Size:
			`),O(t.$$.fragment,s)},m(s,r){M(s,e,r),U(t,s,r),a=!0},p(s,r){const l={};r&12&&(l.value=s[2][`${s[3]}Queue`].length),t.$set(l)},i(s){a||(C(t.$$.fragment,s),a=!0)},o(s){F(t.$$.fragment,s),a=!1},d(s){s&&m(e),G(t,s)}}}function Ma(n){let e,t,a;return t=new qe({props:{color:"danger",format:n[4],value:n[2][`${n[3]}Map`].size}}),{c(){e=B(`In Memory:
			`),Q(t.$$.fragment)},l(s){e=q(s,`In Memory:
			`),O(t.$$.fragment,s)},m(s,r){M(s,e,r),U(t,s,r),a=!0},p(s,r){const l={};r&12&&(l.value=s[2][`${s[3]}Map`].size),t.$set(l)},i(s){a||(C(t.$$.fragment,s),a=!0)},o(s){F(t.$$.fragment,s),a=!1},d(s){s&&m(e),G(t,s)}}}function Fa(n){let e,t,a,s,r,l,c,d;const i=[Ma,Va],f=[];function g(u,_){return u[0]?0:1}return l=g(n),c=f[l]=i[l](n),{c(){e=p("div"),t=p("div"),a=B(n[1]),s=S(),r=p("div"),c.c(),this.h()},l(u){e=$(u,"DIV",{class:!0});var _=y(e);t=$(_,"DIV",{class:!0});var b=y(t);a=q(b,n[1]),b.forEach(m),s=P(_),r=$(_,"DIV",{class:!0});var k=y(r);c.l(k),k.forEach(m),_.forEach(m),this.h()},h(){v(t,"class","card-header text-center"),v(r,"class","card-body"),v(e,"class","card")},m(u,_){M(u,e,_),o(e,t),o(t,a),o(e,s),o(e,r),f[l].m(r,null),d=!0},p(u,[_]){(!d||_&2)&&ee(a,u[1]);let b=l;l=g(u),l===b?f[l].p(u,_):(Ue(),F(f[b],1,1,()=>{f[b]=null}),Ge(),c=f[l],c?c.p(u,_):(c=f[l]=i[l](u),c.c()),C(c,1),c.m(r,null))},i(u){d||(C(c),d=!0)},o(u){F(c),d=!1},d(u){u&&m(e),f[l].d()}}}function Ra(n,e,t){let{memory:a=!1}=e,{title:s}=e,{transactor:r}=e,{queue:l}=e;const c=i=>`${De.shortNumber(i)}`,d=i=>`${De.shortNumber(i)}`;return n.$$set=i=>{"memory"in i&&t(0,a=i.memory),"title"in i&&t(1,s=i.title),"transactor"in i&&t(2,r=i.transactor),"queue"in i&&t(3,l=i.queue)},[a,s,r,l,c,d]}class It extends ve{constructor(e){super(),ge(this,e,Ra,Fa,me,{memory:0,title:1,transactor:2,queue:3})}}function Aa(n){let e,t=De.shortNumber(n[2].actual)+"",a,s,r,l,c=De.shortNumber(n[2].potential)+"",d;return{c(){e=p("span"),a=B(t),s=S(),r=p("span"),l=B("↑ "),d=B(c),this.h()},l(i){e=$(i,"SPAN",{class:!0});var f=y(e);a=q(f,t),f.forEach(m),s=P(i),r=$(i,"SPAN",{class:!0});var g=y(r);l=q(g,"↑ "),d=q(g,c),g.forEach(m),this.h()},h(){v(e,"class","fs-3 actual svelte-dw75hy"),v(r,"class","text-info-emphasis")},m(i,f){M(i,e,f),o(e,a),M(i,s,f),M(i,r,f),o(r,l),o(r,d)},p(i,f){f&4&&t!==(t=De.shortNumber(i[2].actual)+"")&&ee(a,t),f&4&&c!==(c=De.shortNumber(i[2].potential)+"")&&ee(d,c)},d(i){i&&(m(e),m(s),m(r))}}}function Ba(n){let e,t,a=De.number(n[2].latency,0,1)+"",s,r;return{c(){e=p("span"),t=B("~"),s=B(a),r=B("ms"),this.h()},l(l){e=$(l,"SPAN",{class:!0});var c=y(e);t=q(c,"~"),s=q(c,a),r=q(c,"ms"),c.forEach(m),this.h()},h(){v(e,"class","fs-3 actual svelte-dw75hy")},m(l,c){M(l,e,c),o(e,t),o(e,s),o(e,r)},p(l,c){c&4&&a!==(a=De.number(l[2].latency,0,1)+"")&&ee(s,a)},d(l){l&&m(e)}}}function qa(n){let e,t,a,s,r;function l(i,f){return i[1]?Ba:Aa}let c=l(n),d=c(n);return{c(){e=p("div"),t=p("div"),a=B(n[0]),s=S(),r=p("div"),d.c(),this.h()},l(i){e=$(i,"DIV",{class:!0});var f=y(e);t=$(f,"DIV",{class:!0});var g=y(t);a=q(g,n[0]),g.forEach(m),s=P(f),r=$(f,"DIV",{class:!0});var u=y(r);d.l(u),u.forEach(m),f.forEach(m),this.h()},h(){v(t,"class","card-header text-center"),v(r,"class","card-body text-center"),v(e,"class","card")},m(i,f){M(i,e,f),o(e,t),o(t,a),o(e,s),o(e,r),d.m(r,null)},p(i,[f]){f&1&&ee(a,i[0]),c===(c=l(i))&&d?d.p(i,f):(d.d(1),d=c(i),d&&(d.c(),d.m(r,null)))},i:pe,o:pe,d(i){i&&m(e),d.d()}}}function za(n,e,t){let{title:a}=e,{transactor:s}=e,{queue:r}=e,{per:l="second"}=e,{latency:c=!1}=e;const d=u=>{let _=u.length-1;const b=u[_].startedAt.performance,k=u[0].startedAt.performance,H=b-k,D=Math.min(5e3,H),I=[];for(;_>=0;){const z=u[_],j=b-z.startedAt.performance;if(I.push(z),_--,j>D)break;I.push(z),_--}const w=I.reduce((z,j)=>z+j.transaction.stats.total,0)/I.length;return l=="second"?{actual:Math.floor(I.length/D*1e3),potential:1e3/w,latency:w}:{actual:Math.floor(I.length/D*1e3*60),potential:1e3*60/w,latency:w}};let i,f={actual:0};const g=()=>{s[`${r}History`].length>0&&t(2,f=d(s[`${r}History`]))};return i=setInterval(()=>{g()},100),Xt(()=>{clearInterval(i)}),n.$$set=u=>{"title"in u&&t(0,a=u.title),"transactor"in u&&t(3,s=u.transactor),"queue"in u&&t(4,r=u.queue),"per"in u&&t(5,l=u.per),"latency"in u&&t(1,c=u.latency)},[a,c,f,s,r,l]}class Ke extends ve{constructor(e){super(),ge(this,e,za,qa,me,{title:0,transactor:3,queue:4,per:5,latency:1})}}function Na(n){let e,t,a,s,r,l,c,d;return c=new qe({props:{color:"danger",format:n[3],max:1,value:n[1]}}),{c(){e=p("div"),t=p("div"),a=B(n[0]),s=S(),r=p("div"),l=B(`5 seconds:
		`),Q(c.$$.fragment),this.h()},l(i){e=$(i,"DIV",{class:!0});var f=y(e);t=$(f,"DIV",{class:!0});var g=y(t);a=q(g,n[0]),g.forEach(m),s=P(f),r=$(f,"DIV",{class:!0});var u=y(r);l=q(u,`5 seconds:
		`),O(c.$$.fragment,u),u.forEach(m),f.forEach(m),this.h()},h(){v(t,"class","card-header text-center"),v(r,"class","card-body"),v(e,"class","card")},m(i,f){M(i,e,f),o(e,t),o(t,a),o(e,s),o(e,r),o(r,l),U(c,r,null),d=!0},p(i,[f]){(!d||f&1)&&ee(a,i[0]);const g={};f&2&&(g.value=i[1]),c.$set(g)},i(i){d||(C(c.$$.fragment,i),d=!0)},o(i){F(c.$$.fragment,i),d=!1},d(i){i&&m(e),G(c)}}}function ja(n,e,t){let{title:a="Utilization"}=e,{transactor:s}=e;const r=f=>{let g=f.length-1;const u=f[g].startedAt.performance,_=f[0].startedAt.performance,b=Math.min(5e3,u-_),k=[];for(;g>=0;){const D=f[g];if(u-D.finishedAt.performance>b)break;k.push(D),g--}return k.reduce((D,I)=>D+I.transaction.stats.total,0)/b};let l,c=0;const d=()=>{s.transactionHistory.length>0&&t(1,c=r(s.transactionHistory))};l=setInterval(()=>{d()},100),Xt(()=>{clearInterval(l)});const i=f=>`${De.percent(f,0,0)}`;return n.$$set=f=>{"title"in f&&t(0,a=f.title),"transactor"in f&&t(2,s=f.transactor)},[a,c,s,i]}class Qa extends ve{constructor(e){super(),ge(this,e,ja,Na,me,{title:0,transactor:2})}}function Oa(n){let e,t,a,s,r,l,c,d,i;return{c(){e=p("div"),t=p("input"),s=S(),r=p("label"),l=B(n[2]),this.h()},l(f){e=$(f,"DIV",{class:!0});var g=y(e);t=$(g,"INPUT",{class:!0,type:!0,id:!0}),s=P(g),r=$(g,"LABEL",{class:!0,for:!0});var u=y(r);l=q(u,n[2]),u.forEach(m),g.forEach(m),this.h()},h(){v(t,"class","form-check-input"),v(t,"type","checkbox"),v(t,"id",a=`check-${n[0].id}`),v(r,"class","form-check-label"),v(r,"for",c=`check-${n[0].id}`),v(e,"class","form-check")},m(f,g){M(f,e,g),o(e,t),t.checked=n[1],o(e,s),o(e,r),o(r,l),d||(i=vt(t,"change",n[3]),d=!0)},p(f,[g]){g&1&&a!==(a=`check-${f[0].id}`)&&v(t,"id",a),g&2&&(t.checked=f[1]),g&1&&c!==(c=`check-${f[0].id}`)&&v(r,"for",c)},i:pe,o:pe,d(f){f&&m(e),d=!1,i()}}}function Ua(n,e,t){let{check:a}=e,{enabled:s,label:r}=a;function l(){s=this.checked,t(1,s)}return n.$$set=c=>{"check"in c&&t(0,a=c.check)},n.$$.update=()=>{n.$$.dirty&2&&t(0,a.enabled=s,a)},[a,s,r,l]}class Vt extends ve{constructor(e){super(),ge(this,e,Ua,Oa,me,{check:0})}}function Mt(n){let e,t,a,s;return a=new We({props:{label:"Valcache (NVMe SSD)",format:n[2],range:n[0].storageLayers.valcache.size}}),{c(){e=p("br"),t=S(),Q(a.$$.fragment)},l(r){e=$(r,"BR",{}),t=P(r),O(a.$$.fragment,r)},m(r,l){M(r,e,l),M(r,t,l),U(a,r,l),s=!0},p(r,l){const c={};l&1&&(c.range=r[0].storageLayers.valcache.size),a.$set(c)},i(r){s||(C(a.$$.fragment,r),s=!0)},o(r){F(a.$$.fragment,r),s=!1},d(r){r&&(m(e),m(t)),G(a,r)}}}function Ft(n){let e,t,a,s;return a=new We({props:{label:"Memcached (RAM)",format:n[3],range:n[0].storageLayers.memcached.size}}),{c(){e=p("br"),t=S(),Q(a.$$.fragment)},l(r){e=$(r,"BR",{}),t=P(r),O(a.$$.fragment,r)},m(r,l){M(r,e,l),M(r,t,l),U(a,r,l),s=!0},p(r,l){const c={};l&1&&(c.range=r[0].storageLayers.memcached.size),a.$set(c)},i(r){s||(C(a.$$.fragment,r),s=!0)},o(r){F(a.$$.fragment,r),s=!1},d(r){r&&(m(e),m(t)),G(a,r)}}}function Ga(n){let e,t,a,s,r=n[0].id+"",l,c,d,i,f,g,u,_,b,k,H,D,I,w,z,j;g=new Vt({props:{check:n[0].storageLayers.valcache}}),b=new Vt({props:{check:n[0].storageLayers.memcached}}),I=new We({props:{label:"Object Cache (RAM)",format:n[1],range:n[0].storageLayers.objectcache.size}});let R=n[0].storageLayers.valcache.enabled&&Mt(n),E=n[0].storageLayers.memcached.enabled&&Ft(n);return{c(){e=p("div"),t=p("div"),a=B("Storage Layers "),s=p("code"),l=B(r),c=S(),d=p("div"),i=p("div"),f=p("div"),Q(g.$$.fragment),u=S(),_=p("div"),Q(b.$$.fragment),k=S(),H=p("br"),D=S(),Q(I.$$.fragment),w=S(),R&&R.c(),z=S(),E&&E.c(),this.h()},l(h){e=$(h,"DIV",{class:!0});var T=y(e);t=$(T,"DIV",{class:!0});var X=y(t);a=q(X,"Storage Layers "),s=$(X,"CODE",{});var oe=y(s);l=q(oe,r),oe.forEach(m),X.forEach(m),c=P(T),d=$(T,"DIV",{class:!0});var Z=y(d);i=$(Z,"DIV",{class:!0});var W=y(i);f=$(W,"DIV",{class:!0});var re=y(f);O(g.$$.fragment,re),re.forEach(m),u=P(W),_=$(W,"DIV",{class:!0});var ie=y(_);O(b.$$.fragment,ie),ie.forEach(m),W.forEach(m),k=P(Z),H=$(Z,"BR",{}),D=P(Z),O(I.$$.fragment,Z),w=P(Z),R&&R.l(Z),z=P(Z),E&&E.l(Z),Z.forEach(m),T.forEach(m),this.h()},h(){v(t,"class","card-header"),v(f,"class","col"),v(_,"class","col"),v(i,"class","row"),v(d,"class","card-body"),v(e,"class","card")},m(h,T){M(h,e,T),o(e,t),o(t,a),o(t,s),o(s,l),o(e,c),o(e,d),o(d,i),o(i,f),U(g,f,null),o(i,u),o(i,_),U(b,_,null),o(d,k),o(d,H),o(d,D),U(I,d,null),o(d,w),R&&R.m(d,null),o(d,z),E&&E.m(d,null),j=!0},p(h,[T]){(!j||T&1)&&r!==(r=h[0].id+"")&&ee(l,r);const X={};T&1&&(X.check=h[0].storageLayers.valcache),g.$set(X);const oe={};T&1&&(oe.check=h[0].storageLayers.memcached),b.$set(oe);const Z={};T&1&&(Z.range=h[0].storageLayers.objectcache.size),I.$set(Z),h[0].storageLayers.valcache.enabled?R?(R.p(h,T),T&1&&C(R,1)):(R=Mt(h),R.c(),C(R,1),R.m(d,z)):R&&(Ue(),F(R,1,1,()=>{R=null}),Ge()),h[0].storageLayers.memcached.enabled?E?(E.p(h,T),T&1&&C(E,1)):(E=Ft(h),E.c(),C(E,1),E.m(d,null)):E&&(Ue(),F(E,1,1,()=>{E=null}),Ge())},i(h){j||(C(g.$$.fragment,h),C(b.$$.fragment,h),C(I.$$.fragment,h),C(R),C(E),j=!0)},o(h){F(g.$$.fragment,h),F(b.$$.fragment,h),F(I.$$.fragment,h),F(R),F(E),j=!1},d(h){h&&m(e),G(g),G(b),G(I),R&&R.d(),E&&E.d()}}}function Wa(n,e,t){let{transactor:a}=e;const s=c=>`${Intl.NumberFormat("en-US").format(c)} GB`,r=c=>`${Intl.NumberFormat("en-US").format(c)} GB`,l=c=>`${Intl.NumberFormat("en-US").format(c)} GB`;return n.$$set=c=>{"transactor"in c&&t(0,a=c.transactor)},[a,s,r,l]}class Xa extends ve{constructor(e){super(),ge(this,e,Wa,Ga,me,{transactor:0})}}function Ya(n){let e,t,a,s,r=n[0].id+"",l,c,d,i,f,g,u,_,b;return i=new We({props:{label:"Probe Threads (CPU Cores)",format:n[1],range:n[0].prefetch.probe}}),_=new We({props:{label:"Tracing Threads (CPU Cores)",format:n[2],range:n[0].prefetch.tracing}}),{c(){e=p("div"),t=p("div"),a=B("Prefetch "),s=p("code"),l=B(r),c=S(),d=p("div"),Q(i.$$.fragment),f=S(),g=p("br"),u=S(),Q(_.$$.fragment),this.h()},l(k){e=$(k,"DIV",{class:!0});var H=y(e);t=$(H,"DIV",{class:!0});var D=y(t);a=q(D,"Prefetch "),s=$(D,"CODE",{});var I=y(s);l=q(I,r),I.forEach(m),D.forEach(m),c=P(H),d=$(H,"DIV",{class:!0});var w=y(d);O(i.$$.fragment,w),f=P(w),g=$(w,"BR",{}),u=P(w),O(_.$$.fragment,w),w.forEach(m),H.forEach(m),this.h()},h(){v(t,"class","card-header"),v(d,"class","card-body"),v(e,"class","card")},m(k,H){M(k,e,H),o(e,t),o(t,a),o(t,s),o(s,l),o(e,c),o(e,d),U(i,d,null),o(d,f),o(d,g),o(d,u),U(_,d,null),b=!0},p(k,[H]){(!b||H&1)&&r!==(r=k[0].id+"")&&ee(l,r);const D={};H&1&&(D.range=k[0].prefetch.probe),i.$set(D);const I={};H&1&&(I.range=k[0].prefetch.tracing),_.$set(I)},i(k){b||(C(i.$$.fragment,k),C(_.$$.fragment,k),b=!0)},o(k){F(i.$$.fragment,k),F(_.$$.fragment,k),b=!1},d(k){k&&m(e),G(i),G(_)}}}function Za(n,e,t){let{transactor:a}=e;const s=l=>`${Intl.NumberFormat("en-US").format(l)}`,r=l=>`${Intl.NumberFormat("en-US").format(l)}`;return n.$$set=l=>{"transactor"in l&&t(0,a=l.transactor)},[a,s,r]}class Ja extends ve{constructor(e){super(),ge(this,e,Za,Ya,me,{transactor:0})}}function Rt(n,e,t){const a=n.slice();return a[4]=e[t],a}function Ka(n){let e;return{c(){e=B("Segments")},l(t){e=q(t,"Segments")},m(t,a){M(t,e,a)},d(t){t&&m(e)}}}function xa(n){let e;return{c(){e=B("Transactions")},l(t){e=q(t,"Transactions")},m(t,a){M(t,e,a)},d(t){t&&m(e)}}}function At(n){let e,t,a,s,r,l,c,d,i,f,g,u,_,b,k,H,D,I,w,z,j,R;t=new qe({props:{color:"danger",format:rr,value:n[0][`${n[1]}History`].slice(-et).reduce(jt,0)/et}});let E=n[1]==="transaction"&&Bt(n);return c=new qe({props:{color:"success",min:.6,max:mt,format:nr,value:n[2](n[0][`${n[1]}History`],"objectcache"),hits:n[3](n[0][`${n[1]}History`],"objectcache")}}),g=new qe({props:{color:"info",min:.6,max:mt,format:lr,value:n[2](n[0][`${n[1]}History`],"valcache"),hits:n[3](n[0][`${n[1]}History`],"valcache")}}),k=new qe({props:{color:"warning",min:.6,max:mt,format:cr,value:n[2](n[0][`${n[1]}History`],"memcached"),hits:n[3](n[0][`${n[1]}History`],"memcached")}}),w=new qe({props:{color:"danger",min:.6,max:mt,format:or,value:n[2](n[0][`${n[1]}History`],"storage"),hits:n[3](n[0][`${n[1]}History`],"storage")}}),{c(){e=B(`Latency:
			`),Q(t.$$.fragment),a=S(),E&&E.c(),s=S(),r=p("br"),l=B(`
			Object Cache:
			`),Q(c.$$.fragment),d=S(),i=p("br"),f=B(`

			Valcache:
			`),Q(g.$$.fragment),u=S(),_=p("br"),b=B(`
			Memcached:
			`),Q(k.$$.fragment),H=S(),D=p("br"),I=B(`
			DynamoDB:
			`),Q(w.$$.fragment),z=S(),j=p("br")},l(h){e=q(h,`Latency:
			`),O(t.$$.fragment,h),a=P(h),E&&E.l(h),s=P(h),r=$(h,"BR",{}),l=q(h,`
			Object Cache:
			`),O(c.$$.fragment,h),d=P(h),i=$(h,"BR",{}),f=q(h,`

			Valcache:
			`),O(g.$$.fragment,h),u=P(h),_=$(h,"BR",{}),b=q(h,`
			Memcached:
			`),O(k.$$.fragment,h),H=P(h),D=$(h,"BR",{}),I=q(h,`
			DynamoDB:
			`),O(w.$$.fragment,h),z=P(h),j=$(h,"BR",{})},m(h,T){M(h,e,T),U(t,h,T),M(h,a,T),E&&E.m(h,T),M(h,s,T),M(h,r,T),M(h,l,T),U(c,h,T),M(h,d,T),M(h,i,T),M(h,f,T),U(g,h,T),M(h,u,T),M(h,_,T),M(h,b,T),U(k,h,T),M(h,H,T),M(h,D,T),M(h,I,T),U(w,h,T),M(h,z,T),M(h,j,T),R=!0},p(h,T){const X={};T&3&&(X.value=h[0][`${h[1]}History`].slice(-et).reduce(jt,0)/et),t.$set(X),h[1]==="transaction"?E?(E.p(h,T),T&2&&C(E,1)):(E=Bt(h),E.c(),C(E,1),E.m(s.parentNode,s)):E&&(Ue(),F(E,1,1,()=>{E=null}),Ge());const oe={};T&3&&(oe.value=h[2](h[0][`${h[1]}History`],"objectcache")),T&3&&(oe.hits=h[3](h[0][`${h[1]}History`],"objectcache")),c.$set(oe);const Z={};T&3&&(Z.value=h[2](h[0][`${h[1]}History`],"valcache")),T&3&&(Z.hits=h[3](h[0][`${h[1]}History`],"valcache")),g.$set(Z);const W={};T&3&&(W.value=h[2](h[0][`${h[1]}History`],"memcached")),T&3&&(W.hits=h[3](h[0][`${h[1]}History`],"memcached")),k.$set(W);const re={};T&3&&(re.value=h[2](h[0][`${h[1]}History`],"storage")),T&3&&(re.hits=h[3](h[0][`${h[1]}History`],"storage")),w.$set(re)},i(h){R||(C(t.$$.fragment,h),C(E),C(c.$$.fragment,h),C(g.$$.fragment,h),C(k.$$.fragment,h),C(w.$$.fragment,h),R=!0)},o(h){F(t.$$.fragment,h),F(E),F(c.$$.fragment,h),F(g.$$.fragment,h),F(k.$$.fragment,h),F(w.$$.fragment,h),R=!1},d(h){h&&(m(e),m(a),m(s),m(r),m(l),m(d),m(i),m(f),m(u),m(_),m(b),m(H),m(D),m(I),m(z),m(j)),G(t,h),E&&E.d(h),G(c,h),G(g,h),G(k,h),G(w,h)}}}function Bt(n){let e,t,a,s;return a=new qe({props:{color:"success",min:.6,max:mt,format:sr,value:n[2](n[0][`${n[1]}History`],"prefetch"),hits:n[3](n[0][`${n[1]}History`],"prefetch")}}),{c(){e=p("br"),t=B(`
				Tracing Prefetch:
				`),Q(a.$$.fragment)},l(r){e=$(r,"BR",{}),t=q(r,`
				Tracing Prefetch:
				`),O(a.$$.fragment,r)},m(r,l){M(r,e,l),M(r,t,l),U(a,r,l),s=!0},p(r,l){const c={};l&3&&(c.value=r[2](r[0][`${r[1]}History`],"prefetch")),l&3&&(c.hits=r[3](r[0][`${r[1]}History`],"prefetch")),a.$set(c)},i(r){s||(C(a.$$.fragment,r),s=!0)},o(r){F(a.$$.fragment,r),s=!1},d(r){r&&(m(e),m(t)),G(a,r)}}}function er(n){let e,t="Segment";return{c(){e=p("th"),e.textContent=t,this.h()},l(a){e=$(a,"TH",{class:!0,scope:!0,"data-svelte-h":!0}),Se(e)!=="svelte-1z017s"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center"),v(e,"scope","col")},m(a,s){M(a,e,s)},d(a){a&&m(e)}}}function tr(n){let e,t="Transaction";return{c(){e=p("th"),e.textContent=t,this.h()},l(a){e=$(a,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(e)!=="svelte-596dsb"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center"),v(e,"width","1"),v(e,"scope","col")},m(a,s){M(a,e,s)},d(a){a&&m(e)}}}function qt(n){let e,t="Seg.";return{c(){e=p("th"),e.textContent=t,this.h()},l(a){e=$(a,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(e)!=="svelte-jyviti"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center"),v(e,"width","1"),v(e,"scope","col")},m(a,s){M(a,e,s)},d(a){a&&m(e)}}}function zt(n){let e,t=n[4].transaction.segments.length+"",a;return{c(){e=p("td"),a=B(t),this.h()},l(s){e=$(s,"TD",{class:!0});var r=y(e);a=q(r,t),r.forEach(m),this.h()},h(){v(e,"class","text-center")},m(s,r){M(s,e,r),o(e,a)},p(s,r){r&3&&t!==(t=s[4].transaction.segments.length+"")&&ee(a,t)},d(s){s&&m(e)}}}function Nt(n,e){let t,a,s,r=e[4].transaction.id.substring(0,12)+"",l,c,d,i,f=_e.formatDateTime(e[4].startedAt.time)+"",g,u,_,b,k=e[4].transaction.stats.total.toFixed(2)+"",H,D,I,w,z=e[4].transaction.stats.io.prefetch.toFixed(5)+"",j,R,E,h,T=e[4].transaction.stats.io.objectcache.toFixed(5)+"",X,oe,Z,W,re=e[4].transaction.stats.io.valcache.toFixed(3)+"",ie,he,le,fe,ue=e[4].transaction.stats.io.memcached.toFixed(2)+"",Ve,Me,ce,Ie,Pe=e[4].transaction.stats.io.storage.toFixed(2)+"",$e,te,Re,K=e[1]==="transaction"&&zt(e);return{key:n,first:null,c(){t=p("tr"),a=p("th"),s=p("code"),l=B(r),c=B("..."),d=S(),i=p("td"),g=B(f),u=S(),K&&K.c(),_=S(),b=p("td"),H=B(k),D=B("ms"),I=S(),w=p("td"),j=B(z),R=B("ms"),E=S(),h=p("td"),X=B(T),oe=B("ms"),Z=S(),W=p("td"),ie=B(re),he=B("ms"),le=S(),fe=p("td"),Ve=B(ue),Me=B("ms"),ce=S(),Ie=p("td"),$e=B(Pe),te=B("ms"),Re=S(),this.h()},l(Te){t=$(Te,"TR",{});var A=y(t);a=$(A,"TH",{scope:!0,class:!0});var de=y(a);s=$(de,"CODE",{});var Y=y(s);l=q(Y,r),c=q(Y,"..."),Y.forEach(m),de.forEach(m),d=P(A),i=$(A,"TD",{class:!0});var Ae=y(i);g=q(Ae,f),Ae.forEach(m),u=P(A),K&&K.l(A),_=P(A),b=$(A,"TD",{class:!0});var be=y(b);H=q(be,k),D=q(be,"ms"),be.forEach(m),I=P(A),w=$(A,"TD",{class:!0});var se=y(w);j=q(se,z),R=q(se,"ms"),se.forEach(m),E=P(A),h=$(A,"TD",{class:!0});var ae=y(h);X=q(ae,T),oe=q(ae,"ms"),ae.forEach(m),Z=P(A),W=$(A,"TD",{class:!0});var ye=y(W);ie=q(ye,re),he=q(ye,"ms"),ye.forEach(m),le=P(A),fe=$(A,"TD",{class:!0});var we=y(fe);Ve=q(we,ue),Me=q(we,"ms"),we.forEach(m),ce=P(A),Ie=$(A,"TD",{class:!0});var N=y(Ie);$e=q(N,Pe),te=q(N,"ms"),N.forEach(m),Re=P(A),A.forEach(m),this.h()},h(){v(a,"scope","row"),v(a,"class","text-center"),v(i,"class","text-center"),v(b,"class","text-center"),v(w,"class","text-center"),v(h,"class","text-center"),v(W,"class","text-center"),v(fe,"class","text-center"),v(Ie,"class","text-center"),this.first=t},m(Te,A){M(Te,t,A),o(t,a),o(a,s),o(s,l),o(s,c),o(t,d),o(t,i),o(i,g),o(t,u),K&&K.m(t,null),o(t,_),o(t,b),o(b,H),o(b,D),o(t,I),o(t,w),o(w,j),o(w,R),o(t,E),o(t,h),o(h,X),o(h,oe),o(t,Z),o(t,W),o(W,ie),o(W,he),o(t,le),o(t,fe),o(fe,Ve),o(fe,Me),o(t,ce),o(t,Ie),o(Ie,$e),o(Ie,te),o(t,Re)},p(Te,A){e=Te,A&3&&r!==(r=e[4].transaction.id.substring(0,12)+"")&&ee(l,r),A&3&&f!==(f=_e.formatDateTime(e[4].startedAt.time)+"")&&ee(g,f),e[1]==="transaction"?K?K.p(e,A):(K=zt(e),K.c(),K.m(t,_)):K&&(K.d(1),K=null),A&3&&k!==(k=e[4].transaction.stats.total.toFixed(2)+"")&&ee(H,k),A&3&&z!==(z=e[4].transaction.stats.io.prefetch.toFixed(5)+"")&&ee(j,z),A&3&&T!==(T=e[4].transaction.stats.io.objectcache.toFixed(5)+"")&&ee(X,T),A&3&&re!==(re=e[4].transaction.stats.io.valcache.toFixed(3)+"")&&ee(ie,re),A&3&&ue!==(ue=e[4].transaction.stats.io.memcached.toFixed(2)+"")&&ee(Ve,ue),A&3&&Pe!==(Pe=e[4].transaction.stats.io.storage.toFixed(2)+"")&&ee($e,Pe)},d(Te){Te&&m(t),K&&K.d()}}}function ar(n){let e,t,a,s,r=n[0].id+"",l,c,d,i=De.shortNumber(n[0][`${n[1]}HistorySize`])+"",f,g,u,_,b,k,H,D,I,w,z="At",j,R,E,h="I/O",T,X,oe="pF",Z,W,re="oC",ie,he,le="vC",fe,ue,Ve="mC",Me,ce,Ie="DDB",Pe,$e,te=[],Re=new Map,K;function Te(N,J){return N[1]==="transaction"?xa:Ka}let A=Te(n),de=A(n),Y=n[0][`${n[1]}History`].length>0&&At(n);function Ae(N,J){return N[1]==="transaction"?tr:er}let be=Ae(n),se=be(n),ae=n[1]==="transaction"&&qt(),ye=yt(n[0][`${n[1]}History`].slice(-4));const we=N=>N[4].transaction.id;for(let N=0;N<ye.length;N+=1){let J=Rt(n,ye,N),ne=we(J);Re.set(ne,te[N]=Nt(ne,J))}return{c(){e=p("div"),t=p("div"),a=B("Transactor "),s=p("code"),l=B(r),c=S(),d=p("div"),f=B(i),g=S(),de.c(),u=S(),_=p("div"),Y&&Y.c(),b=S(),k=p("table"),H=p("thead"),D=p("tr"),se.c(),I=S(),w=p("th"),w.textContent=z,j=S(),ae&&ae.c(),R=S(),E=p("th"),E.textContent=h,T=S(),X=p("th"),X.textContent=oe,Z=S(),W=p("th"),W.textContent=re,ie=S(),he=p("th"),he.textContent=le,fe=S(),ue=p("th"),ue.textContent=Ve,Me=S(),ce=p("th"),ce.textContent=Ie,Pe=S(),$e=p("tbody");for(let N=0;N<te.length;N+=1)te[N].c();this.h()},l(N){e=$(N,"DIV",{class:!0});var J=y(e);t=$(J,"DIV",{class:!0});var ne=y(t);a=q(ne,"Transactor "),s=$(ne,"CODE",{});var Xe=y(s);l=q(Xe,r),Xe.forEach(m),c=P(ne),d=$(ne,"DIV",{class:!0});var Fe=y(d);f=q(Fe,i),g=P(Fe),de.l(Fe),Fe.forEach(m),ne.forEach(m),u=P(J),_=$(J,"DIV",{class:!0});var Le=y(_);Y&&Y.l(Le),b=P(Le),k=$(Le,"TABLE",{class:!0});var ze=y(k);H=$(ze,"THEAD",{});var Be=y(H);D=$(Be,"TR",{});var x=y(D);se.l(x),I=P(x),w=$(x,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(w)!=="svelte-o8lu9e"&&(w.textContent=z),j=P(x),ae&&ae.l(x),R=P(x),E=$(x,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(E)!=="svelte-tonrsj"&&(E.textContent=h),T=P(x),X=$(x,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(X)!=="svelte-1lkqkmh"&&(X.textContent=oe),Z=P(x),W=$(x,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(W)!=="svelte-1cz79sh"&&(W.textContent=re),ie=P(x),he=$(x,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(he)!=="svelte-std2k4"&&(he.textContent=le),fe=P(x),ue=$(x,"TH",{class:!0,width:!0,scope:!0,"data-svelte-h":!0}),Se(ue)!=="svelte-1q771xf"&&(ue.textContent=Ve),Me=P(x),ce=$(x,"TH",{class:!0,scope:!0,"data-svelte-h":!0}),Se(ce)!=="svelte-1w6qb9"&&(ce.textContent=Ie),x.forEach(m),Be.forEach(m),Pe=P(ze),$e=$(ze,"TBODY",{});var Ye=y($e);for(let Qe=0;Qe<te.length;Qe+=1)te[Qe].l(Ye);Ye.forEach(m),ze.forEach(m),Le.forEach(m),J.forEach(m),this.h()},h(){v(d,"class","float-end"),v(t,"class","card-header"),v(w,"class","text-center"),v(w,"width","1"),v(w,"scope","col"),v(E,"class","text-center"),v(E,"width","80"),v(E,"scope","col"),v(X,"class","text-center"),v(X,"width","1"),v(X,"scope","col"),v(W,"class","text-center"),v(W,"width","1"),v(W,"scope","col"),v(he,"class","text-center"),v(he,"width","1"),v(he,"scope","col"),v(ue,"class","text-center"),v(ue,"width","1"),v(ue,"scope","col"),v(ce,"class","text-center"),v(ce,"scope","col"),v(k,"class","table"),v(_,"class","card-body"),v(e,"class","card")},m(N,J){M(N,e,J),o(e,t),o(t,a),o(t,s),o(s,l),o(t,c),o(t,d),o(d,f),o(d,g),de.m(d,null),o(e,u),o(e,_),Y&&Y.m(_,null),o(_,b),o(_,k),o(k,H),o(H,D),se.m(D,null),o(D,I),o(D,w),o(D,j),ae&&ae.m(D,null),o(D,R),o(D,E),o(D,T),o(D,X),o(D,Z),o(D,W),o(D,ie),o(D,he),o(D,fe),o(D,ue),o(D,Me),o(D,ce),o(k,Pe),o(k,$e);for(let ne=0;ne<te.length;ne+=1)te[ne]&&te[ne].m($e,null);K=!0},p(N,[J]){(!K||J&1)&&r!==(r=N[0].id+"")&&ee(l,r),(!K||J&3)&&i!==(i=De.shortNumber(N[0][`${N[1]}HistorySize`])+"")&&ee(f,i),A!==(A=Te(N))&&(de.d(1),de=A(N),de&&(de.c(),de.m(d,null))),N[0][`${N[1]}History`].length>0?Y?(Y.p(N,J),J&3&&C(Y,1)):(Y=At(N),Y.c(),C(Y,1),Y.m(_,b)):Y&&(Ue(),F(Y,1,1,()=>{Y=null}),Ge()),be!==(be=Ae(N))&&(se.d(1),se=be(N),se&&(se.c(),se.m(D,I))),N[1]==="transaction"?ae||(ae=qt(),ae.c(),ae.m(D,R)):ae&&(ae.d(1),ae=null),J&3&&(ye=yt(N[0][`${N[1]}History`].slice(-4)),te=Yt(te,J,we,1,N,ye,Re,$e,ca,Nt,null,Rt))},i(N){K||(C(Y),K=!0)},o(N){F(Y),K=!1},d(N){N&&m(e),de.d(),Y&&Y.d(),se.d(),ae&&ae.d();for(let J=0;J<te.length;J+=1)te[J].d()}}}const et=30,mt=7,rr=n=>`${n.toFixed(2)}ms`,jt=(n,e)=>n+e.transaction.stats.total,sr=n=>`${n.toFixed(5)}ms`,nr=n=>`${n.toFixed(5)}ms`,lr=n=>`${n.toFixed(3)}ms`,cr=n=>`${n.toFixed(2)}ms`,or=n=>`${n.toFixed(2)}ms`;function ir(n,e,t){let{transactor:a}=e,{queue:s}=e;const r=(c,d)=>{const i=c.slice(-et).filter(g=>g.transaction.stats.io[d]>0);return i.length===0?0:i.reduce((g,u)=>g+u.transaction.stats.io[d],0)/i.length},l=(c,d)=>c.slice(-et).reduce((g,u)=>g+(u.transaction.stats.io[d]>0?1:0),0);return n.$$set=c=>{"transactor"in c&&t(0,a=c.transactor),"queue"in c&&t(1,s=c.queue)},[a,s,r,l]}class Qt extends ve{constructor(e){super(),ge(this,e,ir,ar,me,{transactor:0,queue:1})}}function Ot(n,e,t){const a=n.slice();return a[4]=e[t],a}function Ut(n,e){let t,a,s,r;return a=new La({props:{peer:e[4]}}),{key:n,first:null,c(){t=p("div"),Q(a.$$.fragment),s=S(),this.h()},l(l){t=$(l,"DIV",{class:!0});var c=y(t);O(a.$$.fragment,c),s=P(c),c.forEach(m),this.h()},h(){v(t,"class","col"),this.first=t},m(l,c){M(l,t,c),U(a,t,null),o(t,s),r=!0},p(l,c){e=l;const d={};c&4&&(d.peer=e[4]),a.$set(d)},i(l){r||(C(a.$$.fragment,l),r=!0)},o(l){F(a.$$.fragment,l),r=!1},d(l){l&&m(t),G(a)}}}function fr(n){let e,t,a=[],s=new Map,r,l,c,d,i,f,g,u,_,b,k,H,D,I,w,z,j,R,E,h,T,X,oe,Z,W,re,ie,he,le,fe,ue,Ve,Me,ce,Ie,Pe,$e,te,Re,K,Te,A,de,Y,Ae,be,se,ae,ye,we,N,J,ne,Xe,Fe,Le,ze,Be,x,Ye,Qe,kt,Ne,Ze,je,Et,tt,gt,at=yt(n[2].peers);const Tt=L=>L[4].id;for(let L=0;L<at.length;L+=1){let V=Ot(n,at,L),He=Tt(V);s.set(He,a[L]=Ut(He,V))}return f=new It({props:{title:"Transactor",queue:"transaction",transactor:n[2].transactor}}),_=new Qa({props:{transactor:n[2].transactor}}),H=new Ke({props:{queue:"transaction",title:"Latency",latency:!0,transactor:n[2].transactor}}),w=new Ke({props:{queue:"transaction",title:"TPS",per:"second",transactor:n[2].transactor}}),R=new Ke({props:{queue:"transaction",title:"TPM",per:"minute",transactor:n[2].transactor}}),T=new $a({props:{clock:n[2].clock,stats:n[1]}}),ie=new Qt({props:{queue:"transaction",transactor:n[2].transactor}}),fe=new Da({props:{system:n[0]}}),ce=new Ja({props:{transactor:n[2].transactor}}),te=new Xa({props:{transactor:n[2].transactor}}),Y=new It({props:{title:"Tracing Prefetch",queue:"prefetch",transactor:n[2].transactor}}),se=new It({props:{title:"Prefetched Segments",memory:!0,queue:"prefetch",transactor:n[2].transactor}}),we=new wa({props:{threads:parseInt(n[2].transactor.prefetch.tracing.value,10)}}),ne=new Ke({props:{queue:"prefetchLight",title:"Latency / Thread",latency:!0,transactor:n[2].transactor}}),Le=new Ke({props:{queue:"prefetch",title:"SPS",per:"second",transactor:n[2].transactor}}),x=new Ke({props:{queue:"prefetch",title:"SPM",per:"minute",transactor:n[2].transactor}}),je=new Qt({props:{queue:"prefetchLight",transactor:n[2].transactor}}),{c(){e=p("div"),t=p("div");for(let L=0;L<a.length;L+=1)a[L].c();r=S(),l=p("br"),c=S(),d=p("div"),i=p("div"),Q(f.$$.fragment),g=S(),u=p("div"),Q(_.$$.fragment),b=S(),k=p("div"),Q(H.$$.fragment),D=S(),I=p("div"),Q(w.$$.fragment),z=S(),j=p("div"),Q(R.$$.fragment),E=S(),h=p("div"),Q(T.$$.fragment),X=S(),oe=p("br"),Z=S(),W=p("div"),re=p("div"),Q(ie.$$.fragment),he=S(),le=p("div"),Q(fe.$$.fragment),ue=S(),Ve=p("br"),Me=S(),Q(ce.$$.fragment),Ie=S(),Pe=p("br"),$e=S(),Q(te.$$.fragment),Re=S(),K=p("br"),Te=S(),A=p("div"),de=p("div"),Q(Y.$$.fragment),Ae=S(),be=p("div"),Q(se.$$.fragment),ae=S(),ye=p("div"),Q(we.$$.fragment),N=S(),J=p("div"),Q(ne.$$.fragment),Xe=S(),Fe=p("div"),Q(Le.$$.fragment),ze=S(),Be=p("div"),Q(x.$$.fragment),Ye=S(),Qe=p("br"),kt=S(),Ne=p("div"),Ze=p("div"),Q(je.$$.fragment),Et=S(),tt=p("div"),this.h()},l(L){e=$(L,"DIV",{});var V=y(e);t=$(V,"DIV",{class:!0});var He=y(t);for(let Dt=0;Dt<a.length;Dt+=1)a[Dt].l(He);He.forEach(m),r=P(V),l=$(V,"BR",{}),c=P(V),d=$(V,"DIV",{class:!0});var ke=y(d);i=$(ke,"DIV",{class:!0});var rt=y(i);O(f.$$.fragment,rt),rt.forEach(m),g=P(ke),u=$(ke,"DIV",{class:!0});var st=y(u);O(_.$$.fragment,st),st.forEach(m),b=P(ke),k=$(ke,"DIV",{class:!0});var nt=y(k);O(H.$$.fragment,nt),nt.forEach(m),D=P(ke),I=$(ke,"DIV",{class:!0});var Je=y(I);O(w.$$.fragment,Je),Je.forEach(m),z=P(ke),j=$(ke,"DIV",{class:!0});var lt=y(j);O(R.$$.fragment,lt),lt.forEach(m),E=P(ke),h=$(ke,"DIV",{class:!0});var ct=y(h);O(T.$$.fragment,ct),ct.forEach(m),ke.forEach(m),X=P(V),oe=$(V,"BR",{}),Z=P(V),W=$(V,"DIV",{class:!0});var Oe=y(W);re=$(Oe,"DIV",{class:!0});var ot=y(re);O(ie.$$.fragment,ot),ot.forEach(m),he=P(Oe),le=$(Oe,"DIV",{class:!0});var Ce=y(le);O(fe.$$.fragment,Ce),ue=P(Ce),Ve=$(Ce,"BR",{}),Me=P(Ce),O(ce.$$.fragment,Ce),Ie=P(Ce),Pe=$(Ce,"BR",{}),$e=P(Ce),O(te.$$.fragment,Ce),Ce.forEach(m),Oe.forEach(m),Re=P(V),K=$(V,"BR",{}),Te=P(V),A=$(V,"DIV",{class:!0});var Ee=y(A);de=$(Ee,"DIV",{class:!0});var it=y(de);O(Y.$$.fragment,it),it.forEach(m),Ae=P(Ee),be=$(Ee,"DIV",{class:!0});var ft=y(be);O(se.$$.fragment,ft),ft.forEach(m),ae=P(Ee),ye=$(Ee,"DIV",{class:!0});var ut=y(ye);O(we.$$.fragment,ut),ut.forEach(m),N=P(Ee),J=$(Ee,"DIV",{class:!0});var dt=y(J);O(ne.$$.fragment,dt),dt.forEach(m),Xe=P(Ee),Fe=$(Ee,"DIV",{class:!0});var ht=y(Fe);O(Le.$$.fragment,ht),ht.forEach(m),ze=P(Ee),Be=$(Ee,"DIV",{class:!0});var St=y(Be);O(x.$$.fragment,St),St.forEach(m),Ee.forEach(m),Ye=P(V),Qe=$(V,"BR",{}),kt=P(V),Ne=$(V,"DIV",{class:!0});var _t=y(Ne);Ze=$(_t,"DIV",{class:!0});var Pt=y(Ze);O(je.$$.fragment,Pt),Pt.forEach(m),Et=P(_t),tt=$(_t,"DIV",{class:!0}),y(tt).forEach(m),_t.forEach(m),V.forEach(m),this.h()},h(){v(t,"class","row"),v(i,"class","col"),v(u,"class","col"),v(k,"class","col"),v(I,"class","col"),v(j,"class","col-2"),v(h,"class","col-3"),v(d,"class","row"),v(re,"class","col-8"),v(le,"class","col-4"),v(W,"class","row"),v(de,"class","col-2"),v(be,"class","col-2"),v(ye,"class","col"),v(J,"class","col-2"),v(Fe,"class","col-2"),v(Be,"class","col-2"),v(A,"class","row"),v(Ze,"class","col-8"),v(tt,"class","col-4"),v(Ne,"class","row")},m(L,V){M(L,e,V),o(e,t);for(let He=0;He<a.length;He+=1)a[He]&&a[He].m(t,null);o(e,r),o(e,l),o(e,c),o(e,d),o(d,i),U(f,i,null),o(d,g),o(d,u),U(_,u,null),o(d,b),o(d,k),U(H,k,null),o(d,D),o(d,I),U(w,I,null),o(d,z),o(d,j),U(R,j,null),o(d,E),o(d,h),U(T,h,null),o(e,X),o(e,oe),o(e,Z),o(e,W),o(W,re),U(ie,re,null),o(W,he),o(W,le),U(fe,le,null),o(le,ue),o(le,Ve),o(le,Me),U(ce,le,null),o(le,Ie),o(le,Pe),o(le,$e),U(te,le,null),o(e,Re),o(e,K),o(e,Te),o(e,A),o(A,de),U(Y,de,null),o(A,Ae),o(A,be),U(se,be,null),o(A,ae),o(A,ye),U(we,ye,null),o(A,N),o(A,J),U(ne,J,null),o(A,Xe),o(A,Fe),U(Le,Fe,null),o(A,ze),o(A,Be),U(x,Be,null),o(e,Ye),o(e,Qe),o(e,kt),o(e,Ne),o(Ne,Ze),U(je,Ze,null),o(Ne,Et),o(Ne,tt),gt=!0},p(L,[V]){V&4&&(at=yt(L[2].peers),Ue(),a=Yt(a,V,Tt,1,L,at,s,t,oa,Ut,null,Ot),Ge());const He={};V&4&&(He.transactor=L[2].transactor),f.$set(He);const ke={};V&4&&(ke.transactor=L[2].transactor),_.$set(ke);const rt={};V&4&&(rt.transactor=L[2].transactor),H.$set(rt);const st={};V&4&&(st.transactor=L[2].transactor),w.$set(st);const nt={};V&4&&(nt.transactor=L[2].transactor),R.$set(nt);const Je={};V&4&&(Je.clock=L[2].clock),V&2&&(Je.stats=L[1]),T.$set(Je);const lt={};V&4&&(lt.transactor=L[2].transactor),ie.$set(lt);const ct={};V&1&&(ct.system=L[0]),fe.$set(ct);const Oe={};V&4&&(Oe.transactor=L[2].transactor),ce.$set(Oe);const ot={};V&4&&(ot.transactor=L[2].transactor),te.$set(ot);const Ce={};V&4&&(Ce.transactor=L[2].transactor),Y.$set(Ce);const Ee={};V&4&&(Ee.transactor=L[2].transactor),se.$set(Ee);const it={};V&4&&(it.threads=parseInt(L[2].transactor.prefetch.tracing.value,10)),we.$set(it);const ft={};V&4&&(ft.transactor=L[2].transactor),ne.$set(ft);const ut={};V&4&&(ut.transactor=L[2].transactor),Le.$set(ut);const dt={};V&4&&(dt.transactor=L[2].transactor),x.$set(dt);const ht={};V&4&&(ht.transactor=L[2].transactor),je.$set(ht)},i(L){if(!gt){for(let V=0;V<at.length;V+=1)C(a[V]);C(f.$$.fragment,L),C(_.$$.fragment,L),C(H.$$.fragment,L),C(w.$$.fragment,L),C(R.$$.fragment,L),C(T.$$.fragment,L),C(ie.$$.fragment,L),C(fe.$$.fragment,L),C(ce.$$.fragment,L),C(te.$$.fragment,L),C(Y.$$.fragment,L),C(se.$$.fragment,L),C(we.$$.fragment,L),C(ne.$$.fragment,L),C(Le.$$.fragment,L),C(x.$$.fragment,L),C(je.$$.fragment,L),gt=!0}},o(L){for(let V=0;V<a.length;V+=1)F(a[V]);F(f.$$.fragment,L),F(_.$$.fragment,L),F(H.$$.fragment,L),F(w.$$.fragment,L),F(R.$$.fragment,L),F(T.$$.fragment,L),F(ie.$$.fragment,L),F(fe.$$.fragment,L),F(ce.$$.fragment,L),F(te.$$.fragment,L),F(Y.$$.fragment,L),F(se.$$.fragment,L),F(we.$$.fragment,L),F(ne.$$.fragment,L),F(Le.$$.fragment,L),F(x.$$.fragment,L),F(je.$$.fragment,L),gt=!1},d(L){L&&m(e);for(let V=0;V<a.length;V+=1)a[V].d();G(f),G(_),G(H),G(w),G(R),G(T),G(ie),G(fe),G(ce),G(te),G(Y),G(se),G(we),G(ne),G(Le),G(x),G(je)}}}function ur(n,e,t){let{system:a}=e,{stats:s}=e;a.start(),a.addPeer({label:"Peer A",transactionsPerSecond:{min:0,max:1500,value:20},segmentsPerTransaction:{min:1,max:10,value:2}}),a.addPeer({label:"Peer B",transactionsPerSecond:{min:0,max:1500,value:20},segmentsPerTransaction:{min:1,max:10,value:2}});let r=a.data();const l=()=>{a.tick(),t(2,r=a.data()),requestAnimationFrame(l)};return wt(()=>{requestAnimationFrame(l)}),n.$$set=c=>{"system"in c&&t(0,a=c.system),"stats"in c&&t(1,s=c.stats)},[a,s,r]}let dr=class extends ve{constructor(e){super(),ge(this,e,ur,fr,me,{system:0,stats:1})}};const hr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let pt=(n=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=hr[t[n]&63];return e};const mr=5e3,vr=1e4,xe=5e3;class gr{constructor(e){this._fps_stats=e.stats,this.start()}start(){this._data={},this._data.clock={performance:{started:performance.now(),now:performance.now(),ticked:performance.now(),oneSecond:performance.now(),lastTransaction:performance.now(),lastPrefetch:performance.now()},time:{now:Date.now()}},this._data.transactor={id:pt(),prefetch:{probe:{id:"probe",min:0,max:24,value:0},tracing:{id:"tracing",min:0,max:48,value:0}},storageLayers:{prefetch:{id:"prefetch",label:"Tracing Prefetch",latency:()=>_e.floatRandomBetween(5e-5,1e-4)},objectcache:{enabled:!0,id:"objectcache",label:"Object Cache",latency:()=>_e.floatRandomBetween(5e-5,1e-4),size:{id:"objectcache",min:1,max:500,value:1}},valcache:{enabled:!1,id:"valcache",label:"Valcache",latency:()=>_e.floatRandomBetween(.01,.1),size:{id:"valcache",min:1,max:500,value:500}},memcached:{enabled:!1,id:"memcached",label:"Memcached",latency:()=>_e.floatRandomBetween(.3,3),size:{id:"memcached",min:1,max:500,value:64}},storage:{id:"storage",label:"DynamoDB",latency:()=>_e.floatRandomBetween(5,7)}},transactionQueue:[],prefetchQueue:[],prefetchMap:new Map,transactionHistory:[],transactionHistorySize:0,prefetchHistory:[],prefetchLightHistory:[],prefetchHistorySize:0,prefetchLightHistorySize:0},this._data.peers=[]}restart(){this._data.transactor.transactionQueue=[],this._data.transactor.prefetchQueue=[],this._data.transactor.prefetchMap=new Map,this._data.transactor.transactionHistory=[],this._data.transactor.transactionHistorySize=0,this._data.transactor.prefetchHistory=[],this._data.transactor.prefetchLightHistory=[],this._data.transactor.prefetchHistorySize=0,this._data.transactor.prefetchLightHistorySize=0}addPeer(e){const t=pt(),a={id:t,...e};a.transactionsPerSecond.id=`tps-${t}`,a.segmentsPerTransaction.id=`spt-${t}`,this._data.peers.push(a)}generateTransactorsForPeer(e){let t;parseInt(e.transactionsPerSecond.value,10)==0?t=0:t=_e.intRandomBetween(Math.max(1,Math.floor(parseInt(e.transactionsPerSecond.value)*.75)),Math.ceil(parseInt(e.transactionsPerSecond.value)*1.25));const a=[];for(let s=0;s<t;s++){const r=_e.intRandomBetween(Math.max(1,Math.floor(parseInt(e.segmentsPerTransaction.value)*.75)),Math.ceil(parseInt(e.segmentsPerTransaction.value)*1.25)),l=[];for(let c=0;c<r;c++)l.push({id:pt()});a.push({id:pt(),peer:e.id,segments:l})}return a}peersProcess(){const e=this._data.peers.map(t=>this.generateTransactorsForPeer(t)).flat();_e.shuffle(e).forEach(t=>{this._data.transactor.transactionQueue.length<mr&&(parseInt(this._data.transactor.prefetch.tracing.value,10)>0?t.segments.forEach(a=>{this._data.transactor.prefetchQueue.length<vr&&(this._data.transactor.prefetchQueue.push(a),this._data.transactor.prefetchMap.set(a.id,!1))}):(this._data.transactor.prefetchQueue=[],this._data.transactor.prefetchMap=new Map,this._data.transactor.prefetchHistory=[],this._data.transactor.prefetchLightHistory=[],this._data.transactor.prefetchHistorySize=0,this._data.transactor.prefetchLightHistorySize=0),this._data.transactor.transactionQueue.push({...t,enqueuedAt:{performance:performance.now(),time:Date.now()}}))})}calculateProbability(e){let{min:t,max:a,value:s}=e;t=parseFloat(t),a=parseFloat(a),s=parseFloat(s);const r=(s-t)/(a-t),l=.95,c=.05;return c+r*(l-c)}generateLatency(e){const t=this._data.transactor.storageLayers;return this._data.transactor.prefetchMap.get(e.id)?{...e,layer:t.prefetch.id,latency:t.prefetch.latency()}:t.objectcache.enabled&&_e.floatRandomBetween(0,1)<=this.calculateProbability(t.objectcache.size)?{...e,layer:t.objectcache.id,latency:t.objectcache.latency()}:t.valcache.enabled&&_e.floatRandomBetween(0,1)<=this.calculateProbability(t.valcache.size)?{...e,layer:t.valcache.id,latency:t.valcache.latency()}:t.memcached.enabled&&_e.floatRandomBetween(0,1)<=this.calculateProbability(t.memcached.size)?{...e,layer:t.memcached.id,latency:t.memcached.latency()}:{...e,layer:t.storage.id,latency:t.storage.latency()}}generateLatenciesWithParallelFetches(e,t){let a=[];for(let s=0;s<e.length;s+=t){const r=e.slice(s,s+t),l=Math.max(...r.map(c=>c.latency));r.forEach(c=>{c.latency===l?a.push({...c}):a.push({...c,latency:0})})}return a}calculateExpectedTimeForTransaction(e){const t=this._data.transactor.prefetch,a=1+parseInt(t.probe.value),s=this.generateLatenciesWithParallelFetches(e.segments.map(l=>this.generateLatency(l)),a),r={io:{prefetch:s.filter(l=>l.layer==="prefetch").reduce((l,c)=>l+c.latency,0),objectcache:s.filter(l=>l.layer==="objectcache").reduce((l,c)=>l+c.latency,0),valcache:s.filter(l=>l.layer==="valcache").reduce((l,c)=>l+c.latency,0),memcached:s.filter(l=>l.layer==="memcached").reduce((l,c)=>l+c.latency,0),storage:s.filter(l=>l.layer==="storage").reduce((l,c)=>l+c.latency,0)},sequentially:{fetch:s.reduce((l,c)=>l+c.latency,0),apply:s.length*5*_e.floatRandomBetween(.004,.006)}};return r.total=Object.values(r.sequentially).reduce((l,c)=>l+c,0),e.stats=r,e}calculateExpectedTimeForTransactions(e){return e.map(t=>this.calculateExpectedTimeForTransaction(t))}calculateExpectedTimeForPrefetchSegments(e){const t=this._data.transactor.prefetch,a=parseInt(t.tracing.value,10);return this.generateLatenciesWithParallelFetches(e.map(s=>this.generateLatency(s)),a)}prefetchProcess(){if(parseInt(this._data.transactor.prefetch.tracing.value,10)===0)return;this._data.transactor.prefetchQueue=this.calculateExpectedTimeForPrefetchSegments(this._data.transactor.prefetchQueue),this._data.transactor.prefetchQueue.length===0&&(this._data.clock.performance.lastPrefetch=performance.now());let e=performance.now()-this._data.clock.performance.lastPrefetch;for(;e>0&&this._data.transactor.prefetchQueue.length>0;){const t=this._data.transactor.prefetchQueue[0];if(t.latency<=e){const a={startedAt:{performance:this._data.clock.performance.lastPrefetch,time:Date.now()},finishedAt:{performance:this._data.clock.performance.lastPrefetch+t.latency},transaction:{...t,segments:[{id:t.id}],stats:{total:t.latency,io:{prefetch:0,objectcache:0,valcache:0,memcached:0,storage:0}}}};a.transaction.stats.io[t.layer]=t.latency,e-=t.latency,this._data.clock.performance.lastPrefetch+=t.latency,this._data.transactor.prefetchMap.has(t.id)&&this._data.transactor.prefetchMap.set(t.id,!0),this._data.transactor.prefetchQueue.shift(),this._data.transactor.prefetchHistory.push(a),this._data.transactor.prefetchHistory.length>xe&&(this._data.transactor.prefetchHistory=this._data.transactor.prefetchHistory.slice(-xe)),t.latency>0&&(this._data.transactor.prefetchLightHistory.push(a),this._data.transactor.prefetchLightHistory.length>xe&&(this._data.transactor.prefetchLightHistory=this._data.transactor.prefetchLightHistory.slice(-xe))),this._data.transactor.prefetchHistorySize+=1,this._data.transactor.prefetchLightHistorySize+=1}else break}}transactorProcess(){this._data.transactor.transactionQueue=this.calculateExpectedTimeForTransactions(this._data.transactor.transactionQueue),this._data.transactor.transactionQueue.length===0&&(this._data.clock.performance.lastTransaction=performance.now());let e=performance.now()-this._data.clock.performance.lastTransaction;for(;e>0&&this._data.transactor.transactionQueue.length>0;){const t=this._data.transactor.transactionQueue[0];if(t.stats.total<=e){const a={startedAt:{performance:this._data.clock.performance.lastTransaction,time:Date.now()},finishedAt:{performance:this._data.clock.performance.lastTransaction+t.stats.total},transaction:t};e-=t.stats.total,this._data.clock.performance.lastTransaction+=t.stats.total,this._data.transactor.transactionHistorySize+=1,this._data.transactor.transactionHistory.push(a),this._data.transactor.transactionHistory.length>xe&&(this._data.transactor.transactionHistory=this._data.transactor.transactionHistory.slice(-xe)),t.segments.forEach(s=>{this._data.transactor.prefetchMap.delete(s.id)}),this._data.transactor.transactionQueue.shift()}else break}}tick(){this._data.clock.performance.now=performance.now(),this._data.clock.time.now=Date.now(),this._fps_stats.begin(),this._data.clock.performance.now-this._data.clock.performance.oneSecond>=1e3&&(this._data.clock.performance.oneSecond=performance.now(),this.peersProcess()),this.prefetchProcess(),this.transactorProcess(),this._fps_stats.end(),this._data.clock.performance.ticked=performance.now(),this._data.clock.time.ticked=Date.now()}data(){return this._data}}function _r(n){let e,t;return e=new dr({props:{system:n[1],stats:n[0]}}),{c(){Q(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,s){U(e,a,s),t=!0},p:pe,i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function pr(n){let e,t;return e=new va({props:{$$slots:{default:[_r]},$$scope:{ctx:n}}}),{c(){Q(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,s){U(e,a,s),t=!0},p(a,[s]){const r={};s&4&&(r.$$scope={dirty:s,ctx:a}),e.$set(r)},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function $r(n){const e=new ua,t=new gr({stats:e});return wt(()=>{Ht.show(),Ht.hide()}),[e,t]}class br extends ve{constructor(e){super(),ge(this,e,$r,pr,me,{})}}function Gt(n){let e,t;return e=new br({}),{c(){Q(e.$$.fragment)},l(a){O(e.$$.fragment,a)},m(a,s){U(e,a,s),t=!0},i(a){t||(C(e.$$.fragment,a),t=!0)},o(a){F(e.$$.fragment,a),t=!1},d(a){G(e,a)}}}function yr(n){let e,t,a=n[0]&&Gt();return{c(){a&&a.c(),e=bt()},l(s){a&&a.l(s),e=bt()},m(s,r){a&&a.m(s,r),M(s,e,r),t=!0},p(s,[r]){s[0]?a?r&1&&C(a,1):(a=Gt(),a.c(),C(a,1),a.m(e.parentNode,e)):a&&(Ue(),F(a,1,1,()=>{a=null}),Ge())},i(s){t||(C(a),t=!0)},o(s){F(a),t=!1},d(s){s&&m(e),a&&a.d(s)}}}function wr(n,e,t){let a=!1;return wt(async()=>{t(0,a=!0)}),[a]}class Tr extends ve{constructor(e){super(),ge(this,e,wr,yr,me,{})}}export{Tr as component,Dr as universal};
